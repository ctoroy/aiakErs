<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="aia.ers.application.mapper.OrganizeMapper">
	
    <!--  POJO -->
    <select id="select_depart" resultType="aia.ers.application.pojo.departDto">
        select * from departement_tb
    </select>
    <select id="select_employee" resultType="aia.ers.application.pojo.employeeDto">
        select * from employee_tb
    </select>

    <!-- 사원목록 조회 -->
    <select id="selectEmpList" parameterType="aia.ers.application.pojo.Emp" resultType="aia.ers.application.pojo.Emp">
        SELECT EM.EMP_NO        AS empNo
             , EM.EMP_ENG_NM    AS empEngNm
             , EM.EMP_NM        AS empNm
             , EM.DEPT_CD       AS deptCd
             , DM.DEPT_NM       AS deptNm
             , EM.RGNTN_YN      AS rgntnYn
             , EM.DEPT_RL_NM    AS deptRlNm
             , EM.LCET_NO       AS lcetNo
             , EM.EMAL_ADDR     AS emalAddr
             , EM.GRAD          AS grad
             , EM.DUTY_TTL_NM   AS dutyTtlNm
             , EM.CHG_YN        AS chgYn
             , EM.GRP_NAME      AS grpName
             , EM.ID_NM         AS idNm
          FROM EMP_MNGM EM
          LEFT OUTER JOIN DEPT_MNGM DM
            ON EM.DEPT_CD = DM.DEPT_CD
         WHERE 1=1
        <if test="searchText != null and searchText !=''">
           AND ( EM.EMP_NO LIKE CONCAT('%', #{searchText}, '%')
                 OR EM.EMP_NM LIKE CONCAT('%', #{searchText}, '%')
               )
        </if>
    </select>
</mapper>
